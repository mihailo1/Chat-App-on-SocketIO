{"ast":null,"code":"import _slicedToArray from\"/Users/Mihail/Documents/VS/projects/chat-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Link,Redirect}from\"react-router-dom\";import queryString from\"query-string\";import classes from\"./Join.module.css\";import RecentRooms from\"../../components/RecentRooms/RecentRooms\";import io from\"socket.io-client\";var socket;var Join=function Join(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),room=_useState4[0],setRoom=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),roomsData=_useState6[0],setRoomsData=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),redirect=_useState8[0],setRedirect=_useState8[1];var roomNumber=null;// roomNumber used to hide room input in case query params were passed\nif(window.location.search){roomNumber=queryString.parse(window.location.search).room;}useEffect(function(){var ENDPOINT=\"https://socketsio-chat.herokuapp.com/\";socket=io(ENDPOINT);socket.emit(\"recentRooms\",function(data){setRoomsData(data);});setRoom(roomNumber);if(roomNumber)setRoom(roomNumber);},[]);var keyPressSubmutHandler=function keyPressSubmutHandler(event){if(event.key===\"Enter\"){console.log(event.key);if(name&&room){setRedirect(true);//sets redurect state and applies <Redirect /> compponent\n}}};var setRoomHandler=function setRoomHandler(room){return setRoom(room);};return React.createElement(\"div\",{className:classes.OuterWrapper},React.createElement(\"div\",{className:classes.InnerWrapper},React.createElement(\"h1\",{className:classes.Header},\"Join Chat \",roomNumber),React.createElement(\"div\",null,React.createElement(\"input\",{onKeyPress:function onKeyPress(event){return keyPressSubmutHandler(event);},placeholder:\"Name\",className:classes.JoinInput,type:\"text\",onChange:function onChange(event){return setName(event.target.value);}})),React.createElement(\"div\",null,React.createElement(\"input\",{onKeyPress:function onKeyPress(event){return keyPressSubmutHandler(event);},placeholder:\"Room name\",className:roomNumber?classes.None:[classes.JoinInput,classes.mt20].join(\" \"),type:\"text\",onChange:function onChange(event){return setRoom(event.target.value);}})),React.createElement(Link,{onClick:function onClick(event){return!name||!(room||roomNumber)?event.preventDefault():null;},to:\"/chat?name=\".concat(name,\"&room=\").concat(room)},React.createElement(\"button\",{className:[classes.Button,classes.mt20].join(\" \"),type:\"submit\"},\"Sign In\"))),roomsData?React.createElement(RecentRooms,{setRoomHandler:setRoomHandler,roomsData:roomsData}):null,redirect&&React.createElement(Redirect,{push:true,to:\"/chat?name=\".concat(name,\"&room=\").concat(room)}));};export default Join;","map":{"version":3,"sources":["/Users/Mihail/Documents/VS/projects/chat-app/client/src/containers/Join/Join.js"],"names":["React","useState","useEffect","Link","Redirect","queryString","classes","RecentRooms","io","socket","Join","name","setName","room","setRoom","roomsData","setRoomsData","redirect","setRedirect","roomNumber","window","location","search","parse","ENDPOINT","emit","data","keyPressSubmutHandler","event","key","console","log","setRoomHandler","OuterWrapper","InnerWrapper","Header","JoinInput","target","value","None","mt20","join","preventDefault","Button"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport queryString from \"query-string\";\nimport classes from \"./Join.module.css\";\nimport RecentRooms from \"../../components/RecentRooms/RecentRooms\";\n\nimport io from \"socket.io-client\";\n\nlet socket;\n\nconst Join = () => {\n  const [name, setName] = useState(\"\");\n  const [room, setRoom] = useState(\"\");\n  const [roomsData, setRoomsData] = useState(\"\");\n  const [redirect, setRedirect] = useState(false);\n\n  let roomNumber = null; // roomNumber used to hide room input in case query params were passed\n\n  if (window.location.search) {\n    roomNumber = queryString.parse(window.location.search).room;\n  }\n\n  useEffect(() => {\n    const ENDPOINT = \"https://socketsio-chat.herokuapp.com/\";\n    socket = io(ENDPOINT);\n    socket.emit(\"recentRooms\", data => {\n      setRoomsData(data);\n    });\n    setRoom(roomNumber);\n\n    if (roomNumber) setRoom(roomNumber);\n  }, []);\n\n  const keyPressSubmutHandler = event => {\n    if (event.key === \"Enter\") {\n      console.log(event.key);\n      if (name && room) {\n        setRedirect(true); //sets redurect state and applies <Redirect /> compponent\n      }\n    }\n  };\n\n  const setRoomHandler = room => setRoom(room);\n\n  return (\n    <div className={classes.OuterWrapper}>\n      <div className={classes.InnerWrapper}>\n        <h1 className={classes.Header}>Join Chat {roomNumber}</h1>\n        <div>\n          <input\n            onKeyPress={event => keyPressSubmutHandler(event)}\n            placeholder=\"Name\"\n            className={classes.JoinInput}\n            type=\"text\"\n            onChange={event => setName(event.target.value)}\n          />\n        </div>\n        <div>\n          <input\n            onKeyPress={event => keyPressSubmutHandler(event)}\n            placeholder=\"Room name\"\n            className={\n              roomNumber\n                ? classes.None\n                : [classes.JoinInput, classes.mt20].join(\" \")\n            }\n            type=\"text\"\n            onChange={event => setRoom(event.target.value)}\n          />\n        </div>\n        <Link\n          onClick={event =>\n            !name || !(room || roomNumber) ? event.preventDefault() : null\n          }\n          to={`/chat?name=${name}&room=${room}`}\n        >\n          <button\n            className={[classes.Button, classes.mt20].join(\" \")}\n            type=\"submit\"\n          >\n            Sign In\n          </button>\n        </Link>\n      </div>\n      {roomsData ? (\n        <RecentRooms setRoomHandler={setRoomHandler} roomsData={roomsData} />\n      ) : null}\n      {redirect && <Redirect push to={`/chat?name=${name}&room=${room}`} />}\n    </div>\n  );\n};\n\nexport default Join;\n"]},"metadata":{},"sourceType":"module"}