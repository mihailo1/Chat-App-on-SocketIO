(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{11:function(e,t,n){e.exports={Info:"Info_Info__3WoRg",Left:"Info_Left__39nTq",Right:"Info_Right__1dex1",Online:"Info_Online__1hdxg",Copy:"Info_Copy__1TU_R",ShowUsers:"Info_ShowUsers__1KJfc",Close:"Info_Close__1Khox",Popup:"Info_Popup__VcWd3",fadeOut:"Info_fadeOut__2JmYt",cssAnimation:"Info_cssAnimation__2-PeH"}},114:function(e,t){},150:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(63),s=n.n(r),c=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function l(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(75);var i,m=n(16),u=n(10),_=n(3),p=n(15),d=n.n(p),f=n(7),h=n.n(f),E=n(8),g=n.n(E),v=function(e){var t=Object(a.useState)({display:"none"}),n=Object(_.a)(t,2),r=n[0],s=n[1],c=Object(a.useState)(!0),l=Object(_.a)(c,2),i=l[0],u=l[1],p=e.roomsData.map((function(t,n){var a=t.users.map((function(e){return o.a.createElement("h5",{className:g.a.User,key:e.name},o.a.createElement("span",{role:"img","aria-label":"online"},"\u26a1"),e.name)})),s="/?room=".concat(t.room);return o.a.createElement("div",{className:g.a.Room,key:t.room},o.a.createElement("h2",{className:g.a.RoomHeader,style:0===t.users.length||i?{borderBottom:"0"}:null},o.a.createElement("span",{role:"img","aria-label":"online"},"\ud83c\udfe0")," ",o.a.createElement(m.b,{to:s,onClick:e.setRoomHandler(t.room)},t.room)),o.a.createElement("div",{style:r,className:g.a.UserContainer},a))})),d=0!==e.roomsData.length?o.a.createElement("div",{className:g.a.RoomsInner,onMouseOver:function(){s({display:"block"}),u(!1)}},p):o.a.createElement("h1",{className:g.a.None},"-");return o.a.createElement("div",{className:g.a.RoomsOuter,onMouseLeave:function(){s({display:"none"}),u(!0)}},o.a.createElement("h1",{className:g.a.Header},"Recent rooms:"),d)},b=n(23),N=n.n(b),O=function(){var e=Object(a.useState)(""),t=Object(_.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(""),c=Object(_.a)(s,2),l=c[0],i=c[1],p=Object(a.useState)(""),f=Object(_.a)(p,2),E=f[0],g=f[1],b=Object(a.useState)(!1),O=Object(_.a)(b,2),R=O[0],y=O[1],j=null;window.location.search&&(j=d.a.parse(window.location.search).room),Object(a.useEffect)((function(){N()("https://socketsio-chat.herokuapp.com/").emit("recentRooms",(function(e){g(e)})),i(j),j&&i(j)}),[]);var w=function(e){"Enter"===e.key&&(console.log(e.key),n&&l&&y(!0))};return o.a.createElement("div",{className:h.a.OuterWrapper},o.a.createElement("div",{className:h.a.InnerWrapper},o.a.createElement("h1",{className:h.a.Header},"Join Chat ",j),o.a.createElement("div",null,o.a.createElement("input",{onKeyPress:function(e){return w(e)},placeholder:"Name",className:h.a.JoinInput,type:"text",onChange:function(e){return r(e.target.value)}})),o.a.createElement("div",null,o.a.createElement("input",{onKeyPress:function(e){return w(e)},placeholder:"Room name",className:j?h.a.None:[h.a.JoinInput,h.a.mt20].join(" "),type:"text",onChange:function(e){return i(e.target.value)}})),o.a.createElement(m.b,{onClick:function(e){return n&&(l||j)?null:e.preventDefault()},to:"/chat?name=".concat(n,"&room=").concat(l)},o.a.createElement("button",{className:[h.a.Button,h.a.mt20].join(" "),type:"submit"},"Sign In"))),E?o.a.createElement(v,{setRoomHandler:function(e){return i(e)},roomsData:E}):null,R&&o.a.createElement(u.a,{push:!0,to:"/chat?name=".concat(n,"&room=").concat(l)}))},R=n(69),y=n(11),j=n.n(y),w=function(e){return o.a.createElement("div",{className:j.a.Info},o.a.createElement("div",{className:j.a.Left},o.a.createElement("h3",null,e.room),o.a.createElement("span",{className:j.a.Copy,onClick:function(){var e=document.location.host,t=d.a.parse(document.location.search).room,n="http://".concat(e,"/?room=").concat(t),a=document.createElement("textarea");a.value=n,a.setAttribute("readonly",""),a.style.position="absolute",a.style.left="-9999px",document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a)},role:"img","aria-label":"copyURL",title:"share chat URL"},"\ud83d\udd17"),o.a.createElement("p",{className:j.a.Popup}," \u2b05 click here to copy URL")),o.a.createElement("div",{className:j.a.Right},o.a.createElement("div",{className:j.a.ShowUsers},o.a.createElement("span",{role:"img","aria-label":"Users",onClick:e.users},"\ud83d\udc65")),o.a.createElement("a",{href:"/",className:j.a.Close},"\xd7")))},I=n(24),C=n.n(I),k=function(e){return o.a.createElement("form",{className:C.a.Form},o.a.createElement("textarea",{className:C.a.Input,type:"text",placeholder:"Write a message...",value:e.message,onChange:function(t){return e.set(t)},onKeyPress:function(t){return"Enter"===t.key?e.send(t):null}}),o.a.createElement("button",{className:C.a.Button,onClick:function(t){return e.send(t)}},"Send"))},x=n(66),M=n.n(x),S=n(38),U=n.n(S),W=n(2),B=n.n(W),J=function(e){var t=e.name.trim().toLowerCase(),n=e.message.user===t,a=0,r=(new Date).toLocaleTimeString("en-GB",{hour:"numeric",minute:"numeric"});return n?o.a.createElement("div",{className:[B.a.Container,B.a.End].join(" ")},o.a.createElement("p",{className:[B.a.SentBy,B.a.pr].join(" "),style:{opacity:a}},t),o.a.createElement("div",{className:[B.a.Box,B.a.Green].join(" "),onMouseOver:function(){return a=a?0:1}},o.a.createElement("p",{className:[B.a.Text,B.a.White].join(" ")},U.a.emojify(e.message.text)),o.a.createElement("p",{className:B.a.Time},r))):o.a.createElement("div",{className:[B.a.Container,B.a.Start].join(" ")},o.a.createElement("div",{className:[B.a.Box,B.a.Light].join(" ")},o.a.createElement("p",{className:[B.a.Text,B.a.Dark].join(" ")},U.a.emojify(e.message.text)),o.a.createElement("p",{className:[B.a.SentBy,B.a.pl].join(" ")},e.message.user," ",o.a.createElement("span",null,r))))},L=n(67),A=n.n(L),H=function(e){var t=e.messages.map((function(t,n){return o.a.createElement("div",{key:n},o.a.createElement(J,{message:t,name:e.name}))}));return o.a.createElement(A.a,{className:M.a.Messages},t)},T=n(19),D=n.n(T),P=function(e){return o.a.createElement("div",{className:D.a.Outer},e.users?o.a.createElement("div",null,o.a.createElement("h1",null,"Users online:"),o.a.createElement("div",{className:D.a.ActiveContainer},o.a.createElement("h2",null,e.users.map((function(e){var t=e.name;return o.a.createElement("div",{key:t,className:D.a.ActiveItem},o.a.createElement("span",{className:D.a.Online,role:"img","aria-label":"online"},"\u26a1"),t)}))))):null)},K=n(68),G=n.n(K),F=function(e){return e.show?o.a.createElement("div",{className:G.a.Backdrop,onClick:e.clicked}):null},q=n(20),Y=n.n(q),X=function(e){return o.a.createElement(a.Fragment,null,o.a.createElement(F,{show:e.show,clicked:e.modalClosed}),o.a.createElement("div",{className:Y.a.Modal,style:{transform:e.show?"translateX(0)":"translateX(-100vh)",opacity:e.show?"1":"0"}},o.a.createElement("h3",null,"Users online:"),e.users?e.users.map((function(e){return o.a.createElement("div",{key:e.name,className:Y.a.User},o.a.createElement("span",{className:Y.a.Online,role:"img","aria-label":"online"},"\u26a1"),e.name)})):null,o.a.createElement("div",{className:Y.a.Button},o.a.createElement("button",{onClick:e.modalClosed},"\xd7"))))},V=n(39),z=n.n(V),Q=function(e){var t=e.location,n=Object(a.useState)(""),r=Object(_.a)(n,2),s=r[0],c=r[1],l=Object(a.useState)(""),m=Object(_.a)(l,2),u=m[0],p=m[1],f=Object(a.useState)(""),h=Object(_.a)(f,2),E=h[0],g=h[1],v=Object(a.useState)([]),b=Object(_.a)(v,2),O=b[0],y=b[1],j=Object(a.useState)(""),I=Object(_.a)(j,2),C=I[0],x=I[1],M=Object(a.useState)(!1),S=Object(_.a)(M,2),U=S[0],W=S[1],B="https://socketsio-chat.herokuapp.com/";Object(a.useEffect)((function(){var e=d.a.parse(t.search),n=e.name,a=e.room;return n||a||(alert("Error: empty query params!"),document.location.assign("/")),c(n),p(a),(i=N()(B)).emit("join",{name:n,room:a},(function(e){e&&alert(e)})),function(){i.emit("disconnect"),i.off()}}),[B,t.search]),Object(a.useEffect)((function(){return i.on("message",(function(e){y([].concat(Object(R.a)(O),[e]))})),i.on("roomData",(function(e){var t=e.users;return x(t)})),function(){i.emit("disconnect"),i.off()}}),[O]);var J=function(){return W(!U)};return o.a.createElement(a.Fragment,null,o.a.createElement("div",{className:z.a.OuterWrapper},o.a.createElement("div",{className:z.a.InnerWrapper},o.a.createElement(w,{room:u,users:J}),o.a.createElement(H,{messages:O,name:s}),o.a.createElement(k,{message:E,send:function(e){e.preventDefault(),E&&E.replace(/\s/g,"").length&&i.emit("sendMessage",E,(function(){return g("")}))},set:function(e){return g(e.target.value)}})),o.a.createElement(P,{users:C})),o.a.createElement(X,{users:C,show:U,modalClosed:J}))},Z=function(){return o.a.createElement(m.a,null,o.a.createElement(u.b,{path:"/",exact:!0,component:O}),o.a.createElement(u.b,{path:"/chat",component:Q}))};s.a.render(o.a.createElement(Z,null),document.querySelector("#root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");c?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):l(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):l(t,e)}))}}()},19:function(e,t,n){e.exports={Outer:"Users_Outer__dw1a2",ActiveContainer:"Users_ActiveContainer__287F8",ActiveItem:"Users_ActiveItem__3dSta"}},2:function(e,t,n){e.exports={Box:"Message_Box__1lE94",Text:"Message_Text__2z9YL",Container:"Message_Container__15phw",SentBy:"Message_SentBy__3uLXR",pl:"Message_pl__5Xtth",pr:"Message_pr__p4aMG",Start:"Message_Start__26AtQ",End:"Message_End__19IhM",White:"Message_White__ABgHp",Dark:"Message_Dark__2iCn7",Green:"Message_Green__2cF1e",Light:"Message_Light__-Y3G0",Time:"Message_Time__1qJqJ"}},20:function(e,t,n){e.exports={Modal:"Modal_Modal__1-5dN",User:"Modal_User__3m7t5",Button:"Modal_Button__R-IEc"}},24:function(e,t,n){e.exports={Form:"Input_Form__2-plC",Input:"Input_Input__2ZMeK",Button:"Input_Button__3sUJU"}},39:function(e,t,n){e.exports={OuterWrapper:"Chat_OuterWrapper__2MOTj",InnerWrapper:"Chat_InnerWrapper__1SfEL",fadeInLeft:"Chat_fadeInLeft__2jEcb"}},66:function(e,t,n){e.exports={Messages:"Messages_Messages__2D-Ym"}},68:function(e,t,n){e.exports={Backdrop:"Backdrop_Backdrop__3j6VK"}},7:function(e,t,n){e.exports={root:"Join_root__2mTeM",OuterWrapper:"Join_OuterWrapper__1FHOt",InnerWrapper:"Join_InnerWrapper__6P_H_",JoinInput:"Join_JoinInput__wnulG",None:"Join_None__V3Pqn",Header:"Join_Header__2YniE",Button:"Join_Button__2nAK8",mt20:"Join_mt20__jQRab"}},70:function(e,t,n){e.exports=n(150)},75:function(e,t,n){},8:function(e,t,n){e.exports={Header:"RecentRooms_Header__3Gc1z",RoomsOuter:"RecentRooms_RoomsOuter__2JhO8",fadeInUp:"RecentRooms_fadeInUp__208f1",None:"RecentRooms_None__3-kXo",RoomsInner:"RecentRooms_RoomsInner__3ZIKG",Room:"RecentRooms_Room__3eeW6",RoomHeader:"RecentRooms_RoomHeader__ll2KC",User:"RecentRooms_User__1Y2N4",UserContainer:"RecentRooms_UserContainer__2hpsl",fadeInDown:"RecentRooms_fadeInDown__Uow-V"}}},[[70,1,2]]]);
//# sourceMappingURL=main.83387877.chunk.js.map